<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Tue Apr 24 12:31:11 2018 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>raw_counts_to_cps.pro (Documentation for /Users/penton/Dropbox/LASP/)</title>

    
    <link rel="stylesheet" type="text/css" media="all"
          href="../../idldoc-resources/main.css" />
    <link rel="stylesheet" type="text/css" media="print"
          href="../../idldoc-resources/main-print.css" />
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="raw_counts_to_cps.pro (Documentation for /Users/penton/Dropbox/LASP/)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">
    <div class="content">
      <code class="source"><span class="comments">; docformat = 'rst'</span>

<span class="comments">;+</span>
<span class="comments">;  NAME: raw_counts_to_cps</span>
<span class="comments">;</span>
<span class="comments">; PURPOSE: Used in COUNTS_TO_IRR to convert from counts to irradiance. This</span>
<span class="comments">;          routine determines the integration time and binsize and adjusts the</span>
<span class="comments">;          counts array appropriately.</span>
<span class="comments">;</span>
<span class="comments">; USAGE: out=raw_counts_to_cps(raw_counts,time,binsize)</span>
<span class="comments">;</span>
<span class="comments">; OPTIONAL INPUT KEYWORDS:</span>
<span class="comments">;</span>
<span class="comments">;   VERBOSE   :  Set if reporting of details is desired</span>
<span class="comments">;-</span>
<a id="raw_counts_to_cps:source"></a>function raw_counts_to_cps,raw_counts,time,binsize,verbose=verbose
	if n_elements(verbose) ne 1 then verbose=0
	<span class="comments">;</span>
	<span class="comments">; Counts come in as per bin (nm) bin for the integration time (s).</span>
	<span class="comments">; Convert to counts = (in_counts/exptime)/binsize</span>
	<span class="comments">;					= (counts/bin for exptime)</span>
	<span class="comments">;	bin_to_nm = bin</span>
	<span class="comments">;</span>
	<span class="comments">; counts*exptime/binsize=[counts*exptime/nm] / exptime(s) * binsize (nm)</span>
	<span class="comments">;</span>
	dt=get_inttime(time,/in_sec) <span class="comments">; return time in seconds</span>
	message,/info,'DT='+string1f(dt[0])+' seconds.'
	cr=double(raw_counts)/double(dt) <span class="comments">; this is now in count/s in a bin convert to cps per nm</span>
	if verbose then help,binsize
	<span class="comments">; This is commented out, but it just doesn't feel right, but</span>
	<span class="comments">; it gets it close to the scale of the reference spectrum</span>
	<span class="comments">;</span>
	cps=cr <span class="comments">;* binsize ; this is now counts/s/nm</span>
	return,cps
end
</code>
    </div>
  </body>
</html>